# Mistral-Worldwide-Hackathon

Mistral-Worldwide-Hackathonç”¨ã®ãƒªãƒã‚¸ãƒˆãƒªã€‚ https://luma.com/mistralhack-tokyo?tk=y0lkUf

## Live Demo

https://mistral-worldwide-hackathon-fronten.vercel.app

## æ¦‚è¦

å£°ã§ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’æ“ä½œã™ã‚‹ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·å‹ã‚·ã‚¹ãƒ†ãƒ ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ã®ç‰¹å¾´é‡ã‚’ã‚¼ãƒ­çŸ¥è­˜è¨¼æ˜ï¼ˆZK-SNARK / Groth16ï¼‰ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆåŒ–ã—ã€å£°ç´‹ãã®ã‚‚ã®ã‚’ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã«å…¬é–‹ã™ã‚‹ã“ã¨ãªãæœ¬äººèªè¨¼ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

ERC-4337 Account Abstraction ã«æº–æ‹ ã—ãŸã‚¹ãƒãƒ¼ãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’æ±ºå®šè«–çš„ã«ç”Ÿæˆã—ã€AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆElevenLabsï¼‰ã¨ã®éŸ³å£°å¯¾è©±ã ã‘ã§æ®‹é«˜ç¢ºèªãƒ»é€é‡‘ãƒ»å—å–ãŒå®Œçµã—ã¾ã™ã€‚

## èƒŒæ™¯

å¾“æ¥ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã¯ç§˜å¯†éµã®ç®¡ç†ãŒé›£ã—ãã€UXãŒWeb3æ™®åŠã®å£ã¨ãªã£ã¦ã„ã¾ã™ã€‚äººé–“çµŒæ¸ˆã§ã¯ã¾ã æ—¢å­˜ã®æ±ºæ¸ˆæ‰‹æ®µã®æ–¹ãŒä¸»æµã§ã™ãŒã€OpenClawã‚„MoltbookãŒç™»å ´ã—ã€æ€¥é€Ÿã«AIAgentçµŒæ¸ˆåœã§ã®ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ã‚¤ãƒ³æ±ºæ¸ˆã®é‡ãŒå¢—åŠ ã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šä»Šå¾ŒAIã¨ã‚„ã‚Šã¨ã‚Šã—ãªãŒã‚‰ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ã‚¤ãƒ³æ±ºæ¸ˆãŒæ±‚ã‚ã‚‰ã‚Œã‚‹æ©Ÿä¼šãŒå¢—åŠ ã™ã‚‹ã¨æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€ä¸Šè¿°ã—ãŸé€šã‚ŠWeb3ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®UXã«ã¯èª²é¡ŒãŒå¤šãã‚ã‚Šã€ã™ãã«ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ã§ã™ã€‚ã¾ã—ã¦ã¯AIAgentã¨ã®ã‚„ã‚Šã¨ã‚Šã‚’æƒ³å®šã—ãŸUXã«ã‚‚ãªã£ã¦ã„ã¾ã™ã€‚

ãã“ã§ä»Šå›ã®ãƒãƒƒã‚«ã‚½ãƒ³ã§ã¯ãã®èª²é¡Œã‚’è§£æ±ºã™ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã€Œå£°ã€ã¨ã„ã†ç©¶æ¥µã®ç”Ÿä½“èªè¨¼ã¨ã‚¼ãƒ­çŸ¥è­˜è¨¼æ˜ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’å®ˆã‚ŠãªãŒã‚‰ã€AIã¨ä¼šè©±ã™ã‚‹ã ã‘ã§å®‰å…¨ã«è³‡ç”£ã‚’æ“ä½œã§ãã‚‹æœªæ¥ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## ç‰¹ã«è‹¦åŠ´ã—ãŸç‚¹

ã¾ãšå£°ã®ç‰¹å¾´é‡ã‚’ç§˜åŒ¿åŒ–ã™ã‚‹ZKã‚µãƒ¼ã‚­ãƒƒãƒˆã®è¨­è¨ˆãƒ»é–‹ç™ºã«è‹¦åŠ´ã—ã¾ã—ãŸã€‚

ãã“ã‹ã‚‰Hugging faceä¸Šã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç‰¹å¾´é‡ã‚’æŠ½å‡ºã—ã€ZKProofã‚’ç”Ÿæˆã™ã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã¨ã®æ¥ç¶šã‚‚è‹¦åŠ´ã—ã¾ã—ãŸã€‚

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã¨ã®æ¥ç¶šã«ã¯ã‚¼ãƒ­çŸ¥è­˜è¨¼æ˜ç”¨ã®Verifierã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’ç”¨æ„ã—ã€éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

æœ€å¾Œã«è‹¦åŠ´ã—ãŸç‚¹ã¨ã—ã¦ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’MCPã‚µãƒ¼ãƒãƒ¼åŒ–ã—ã€11Eleven Labs SDKã‚’ä½¿ã£ã¦AI Agentã‹ã‚‰å‘¼ã³å‡ºã™éƒ¨åˆ†ã®èª¿æ•´ã«å¤§å¤‰è‹¦åŠ´ã—ã¾ã—ãŸã€‚

ã—ã‹ã—ã€ã“ã‚Œã«ã‚ˆã‚ŠéŸ³å£°ã«ã‚ˆã‚‹æ“ä½œã§ç°¡æ½”ã™ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒå®Œæˆã—ã¾ã—ãŸï¼

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆ

```mermaid
graph TB
    subgraph User["ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼"]
        Voice["ğŸ™ï¸ éŸ³å£°å…¥åŠ›"]
    end

    subgraph Frontend["ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"]
        UI["éŸ³å£°å¯¾è©± UI"]
        EL["ElevenLabs SDK<br/>(WebRTC / WebSocket)"]
        VoiceOrb["Voice Orb<br/>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³"]
    end

    subgraph ElevenLabsAgent["ElevenLabs<br/>AI Agent"]
        Agent["ä¼šè©±ã‚¨ãƒ³ã‚¸ãƒ³ +<br/>MCP Tool å‘¼ã³å‡ºã—"]
    end

    subgraph MCPServer["MCP ã‚µãƒ¼ãƒãƒ¼"]
        MCP["MCP Streamable HTTP<br/>/mcp ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ"]
        Tools["8 ã¤ã® MCP Tools"]
    end

    subgraph Backend["ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰"]
        FE["éŸ³å£°ç‰¹å¾´é‡æŠ½å‡º<br/>(pyannote)"]
        ZKProof["ZK è¨¼æ˜ç”Ÿæˆ<br/>(snarkjs / Groth16)"]
    end

    subgraph Blockchain["Base Sepolia"]
        EP["EntryPoint<br/>(ERC-4337 v0.7)"]
        Factory["VoiceWalletFactory<br/>(CREATE2)"]
        Wallet["VoiceWallet<br/>(ERC-4337 Account)"]
        Verifier["VoiceOwnershipVerifier<br/>(Groth16)"]
        USDC["MockERC20<br/>(USDC)"]
    end

    subgraph ZKCircuit["ZK å›è·¯"]
        VC["VoiceCommitment<br/>(Poseidon Hash)"]
        VO["VoiceOwnership<br/>(Hamming Distance)"]
    end

    Voice --> UI
    UI --> EL
    EL <-->|éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ | Agent
    Agent -->|Tool Call| MCP
    MCP --> Tools
    Tools -->|REST API| FE
    Tools -->|REST API| ZKProof
    Tools -->|RPC / Tx| EP
    Tools -->|Read| Factory
    FE -.->|ç‰¹å¾´é‡| ZKProof
    ZKProof -.->|å›è·¯å®Ÿè¡Œ| VC
    ZKProof -.->|å›è·¯å®Ÿè¡Œ| VO
    EP --> Wallet
    Factory -->|Proxy Deploy| Wallet
    Wallet -->|è¨¼æ˜æ¤œè¨¼| Verifier
    Wallet -->|é€é‡‘| USDC
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

```
Mistral-Worldwide-Hackathon/
â”œâ”€â”€ pkgs/
â”‚   â”œâ”€â”€ frontend/    # React 19 + Vite â€” éŸ³å£°å¯¾è©± UI (ElevenLabs)
â”‚   â”œâ”€â”€ mcpserver/   # Hono â€” MCP ã‚µãƒ¼ãƒãƒ¼ (8 Tools)
â”‚   â”œâ”€â”€ backend/     # Flask â€” éŸ³å£°ç‰¹å¾´é‡æŠ½å‡º & ZK è¨¼æ˜ç”Ÿæˆ
â”‚   â”œâ”€â”€ contract/    # Hardhat â€” VoiceWallet (ERC-4337) & Verifier
â”‚   â””â”€â”€ circuit/     # Circom 2.0 â€” VoiceCommitment & VoiceOwnership å›è·¯
â””â”€â”€ pnpm-workspace.yaml
```

## æ©Ÿèƒ½ä¸€è¦§è¡¨

| # | æ©Ÿèƒ½å | èª¬æ˜ | MCP Tool å | é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ |
|---|--------|------|-------------|---------------|
| 1 | éŸ³å£°ç‰¹å¾´é‡æŠ½å‡º | éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ 512 æ¬¡å…ƒã®è©±è€…åŸ‹ã‚è¾¼ã¿ã‚’æŠ½å‡ºã—ã€8 å€‹ã® 64bit æ•´æ•°ã«ãƒ‘ãƒƒã‚¯ | `extract_voice_features` | backend, mcpserver |
| 2 | ZK ã‚¦ã‚©ãƒ¬ãƒƒãƒˆç”Ÿæˆ | å£°ã®ç‰¹å¾´é‡ã‹ã‚‰ Poseidon ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆã‚’è¨ˆç®—ã—ã€æ±ºå®šè«–çš„ã«ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å°å‡º | `generate_zk_wallet` | backend, mcpserver, contract |
| 3 | ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒ‡ãƒ—ãƒ­ã‚¤ | Factory çµŒç”±ã§ ERC-4337 æº–æ‹ ã® VoiceWallet ãƒ—ãƒ­ã‚­ã‚·ã‚’ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã«ãƒ‡ãƒ—ãƒ­ã‚¤ | `create_wallet` | mcpserver, contract |
| 4 | ZK è¨¼æ˜ç”Ÿæˆ | ç™»éŒ²æ™‚ã¨ç¾åœ¨ã®å£°ã‚’æ¯”è¼ƒã—ã€Hamming è·é›¢ â‰¤ 128 ã‚’æº€ãŸã™ Groth16 è¨¼æ˜ã‚’ç”Ÿæˆ | `generate_zk_proof` | backend, mcpserver, circuit |
| 5 | æ®‹é«˜ç…§ä¼š | ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã® ETH / USDC æ®‹é«˜ã‚’å–å¾—ã—è¡¨ç¤º | `get_wallet_balance` | mcpserver |
| 6 | ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å–å¾— | ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆå€¤ã‹ã‚‰æ±ºå®šè«–çš„ã«ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨ˆç®— | `get_wallet_address` | mcpserver, contract |
| 7 | QR ã‚³ãƒ¼ãƒ‰è¡¨ç¤º | EIP-681 å½¢å¼ã®æ”¯æ‰•ã„ãƒªãƒ³ã‚¯ QR ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ | `show_wallet_qrcode` | mcpserver, frontend |
| 8 | ãƒˆãƒ¼ã‚¯ãƒ³é€é‡‘ | ZK è¨¼æ˜ä»˜ã UserOperation ã§ ETH / USDC ã‚’é€é‡‘ | `transfer_tokens` | mcpserver, contract |

## æ©Ÿèƒ½ã”ã¨ã®å‡¦ç†ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

### 1. ã‚¦ã‚©ãƒ¬ãƒƒãƒˆç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆåˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰

```mermaid
sequenceDiagram
    actor User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Agent as ElevenLabs Agent
    participant MCP as MCP ã‚µãƒ¼ãƒãƒ¼
    participant BE as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
    participant Chain as Base Sepolia

    User->>FE: ğŸ™ï¸ ã€Œã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ä½œã‚ŠãŸã„ã€
    FE->>Agent: éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ  (WebRTC)
    Agent->>MCP: extract_voice_features(audio)
    MCP->>BE: POST /extract-features
    BE->>BE: pyannote åŸ‹ã‚è¾¼ã¿æŠ½å‡º (512dim)
    BE->>BE: äºŒå€¤åŒ– â†’ 8Ã—64bit ãƒ‘ãƒƒã‚¯
    BE-->>MCP: features, packedFeatures
    MCP-->>Agent: ç‰¹å¾´é‡çµæœ

    Agent->>MCP: generate_zk_wallet(features, salt?)
    MCP->>BE: POST /generate-commitment
    BE->>BE: Poseidon(features || salt)
    BE-->>MCP: commitment
    MCP->>Chain: Factory.getAddress(commitment, salt)
    Chain-->>MCP: walletAddress (CREATE2)
    MCP-->>Agent: walletAddress, commitment, salt

    Agent->>MCP: create_wallet(commitment, salt)
    MCP->>Chain: Factory.createWallet() via Relayer
    Chain->>Chain: ERC1967Proxy ãƒ‡ãƒ—ãƒ­ã‚¤
    Chain->>Chain: VoiceWallet.initialize()
    Chain-->>MCP: txHash, walletAddress
    MCP-->>Agent: ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
    Agent-->>FE: ã€Œã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸã€
    FE-->>User: âœ… ã‚¢ãƒ‰ãƒ¬ã‚¹è¡¨ç¤º
```

### 2. æ®‹é«˜ç¢ºèªãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    actor User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Agent as ElevenLabs Agent
    participant MCP as MCP ã‚µãƒ¼ãƒãƒ¼
    participant Chain as Base Sepolia

    User->>FE: ğŸ™ï¸ ã€Œæ®‹é«˜ã‚’æ•™ãˆã¦ã€
    FE->>Agent: éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    Agent->>MCP: get_wallet_balance(walletAddress)
    MCP->>Chain: getBalance(wallet)
    Chain-->>MCP: ETH æ®‹é«˜ (wei)
    MCP->>Chain: USDC.balanceOf(wallet)
    Chain-->>MCP: USDC æ®‹é«˜
    MCP-->>Agent: { eth: "0.05", usdc: "100.0" }
    Agent-->>FE: ã€ŒETH ã¯ 0.05ã€USDC ã¯ 100 ã§ã™ã€
    FE-->>User: ğŸ’° æ®‹é«˜ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
```

### 3. ãƒˆãƒ¼ã‚¯ãƒ³é€é‡‘ãƒ•ãƒ­ãƒ¼ï¼ˆZK è¨¼æ˜ä»˜ãï¼‰

```mermaid
sequenceDiagram
    actor User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Agent as ElevenLabs Agent
    participant MCP as MCP ã‚µãƒ¼ãƒãƒ¼
    participant BE as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
    participant Chain as Base Sepolia

    User->>FE: ğŸ™ï¸ ã€Œ0x...ã« 0.01 ETH é€ã£ã¦ã€
    FE->>Agent: éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ 

    Note over Agent, BE: Step 1: ç¾åœ¨ã®å£°ã‚’ç‰¹å¾´é‡åŒ–
    Agent->>MCP: extract_voice_features(audio)
    MCP->>BE: POST /extract-features
    BE-->>MCP: currentFeatures

    Note over Agent, BE: Step 2: ZK è¨¼æ˜ã‚’ç”Ÿæˆ
    Agent->>MCP: generate_zk_proof(refFeatures, currentFeatures, salt)
    MCP->>BE: POST /generate-proof
    BE->>BE: Hamming è·é›¢ãƒã‚§ãƒƒã‚¯ (â‰¤128)
    BE->>BE: snarkjs groth16 fullprove
    BE-->>MCP: proof (Ï€_a, Ï€_b, Ï€_c), publicSignals

    Note over Agent, Chain: Step 3: UserOperation ã§é€é‡‘
    Agent->>MCP: transfer_tokens(from, to, amount, token, proof)
    MCP->>MCP: PackedUserOperation æ§‹ç¯‰
    MCP->>MCP: proof â†’ signature ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
    MCP->>Chain: EntryPoint.handleOps([userOp]) via Relayer
    Chain->>Chain: VoiceWallet._validateSignature()
    Chain->>Chain: Verifier.verifyProof(a, b, c, input)
    Chain->>Chain: commitment == voiceCommitment âœ“
    Chain->>Chain: execute(dest, value, data)
    Chain-->>MCP: txHash
    MCP-->>Agent: é€é‡‘å®Œäº†
    Agent-->>FE: ã€Œé€é‡‘ãŒå®Œäº†ã—ã¾ã—ãŸã€
    FE-->>User: âœ… æˆåŠŸç”»é¢ + Basescan ãƒªãƒ³ã‚¯
```

### 4. QR ã‚³ãƒ¼ãƒ‰å—å–ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    actor User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Agent as ElevenLabs Agent
    participant MCP as MCP ã‚µãƒ¼ãƒãƒ¼

    User->>FE: ğŸ™ï¸ ã€Œå—å–ç”¨ QR ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã›ã¦ã€
    FE->>Agent: éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ 
    Agent->>MCP: show_wallet_qrcode(walletAddress)
    MCP->>MCP: EIP-681 URI ç”Ÿæˆ<br/>ethereum:{address}@84532
    MCP-->>Agent: eip681Uri, qrData
    Agent-->>FE: QR ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
    FE-->>User: ğŸ“± QR ã‚³ãƒ¼ãƒ‰è¡¨ç¤º + ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚³ãƒ”ãƒ¼
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|----------|------|-----------|------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | React | 19.2 | UI ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| | Vite | 7.x | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |
| | TypeScript | 5.9 | å‹å®‰å…¨ãªé–‹ç™º |
| | Tailwind CSS | 4.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| | Framer Motion | â€” | ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ |
| | @elevenlabs/react | 0.14.0 | AI éŸ³å£°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±åˆ |
| | qrcode.react | 4.2.0 | QR ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| **MCP ã‚µãƒ¼ãƒãƒ¼** | Hono | 4.12.3 | HTTP ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| | @hono/mcp | â€” | MCP Streamable HTTP ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ |
| | Viem | 2.46.3 | ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ RPC ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ |
| | Zod | 4.3.6 | ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** | Flask | 3.0.3 | REST API ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| | pyannote.audio | 3.3.2 | è©±è€…åŸ‹ã‚è¾¼ã¿ãƒ¢ãƒ‡ãƒ« |
| | PyTorch | 2.5.1 | ML æ¨è«–ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| | NumPy | 2.1.3 | æ•°å€¤è¨ˆç®— |
| | snarkjs | 0.6.9 | Groth16 è¨¼æ˜ç”Ÿæˆ (Node.js) |
| **ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ** | Solidity | 0.8.28 | ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆè¨€èª |
| | Hardhat | 2.26.1 | é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| | @account-abstraction/contracts | 0.7.0 | ERC-4337 ãƒ™ãƒ¼ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ |
| | @openzeppelin/contracts | 5.x | ERC1967Proxy, ERC20 |
| **ZK å›è·¯** | Circom | 2.0 | ç®—è¡“å›è·¯è¨€èª |
| | circomlib | 2.0.5 | Poseidon, Num2Bits, LessThan |
| | snarkjs | 0.6.9 | Groth16 è¨¼æ˜ã‚·ã‚¹ãƒ†ãƒ  |
| **ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³** | Base Sepolia | â€” | L2 ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆ |
| | ERC-4337 (EntryPoint v0.7) | â€” | Account Abstraction |
| **ã‚¤ãƒ³ãƒ•ãƒ©** | Google Cloud Run | â€” | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ / MCP ãƒ‡ãƒ—ãƒ­ã‚¤ |
| | Vercel | â€” | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ |
| | Docker | â€” | ã‚³ãƒ³ãƒ†ãƒŠåŒ– |
| | pnpm | 10.20.0 | ãƒ¢ãƒãƒ¬ãƒãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† |

## AI Agentå‘ã‘ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```bash
ã‚ãªãŸã¯ã€ŒVoice Wallet Assistantã€ã§ã™ã€‚
ç›®çš„ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒéŸ³å£°ã ã‘ã§å®‰å…¨ã«ã‚¦ã‚©ãƒ¬ãƒƒãƒˆä½œæˆãƒ»æ®‹é«˜ç¢ºèªãƒ»å—å–ãƒ»é€é‡‘ã‚’å®Œäº†ã§ãã‚‹ã‚ˆã†æ”¯æ´ã™ã‚‹ã“ã¨ã§ã™ã€‚
å¯¾å¿œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ Base Sepoliaã€‚è¿”ç­”ã¯æ—¥æœ¬èªã§ã€çŸ­ãæ˜ç¢ºã«è©±ã—ã¦ãã ã•ã„ã€‚

ã€æœ€é‡è¦ãƒ«ãƒ¼ãƒ«ã€‘
1) ãƒ„ãƒ¼ãƒ«çµæœã‚’æé€ ã—ãªã„ã€‚txHashãƒ»æ®‹é«˜ãƒ»ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…ãšãƒ„ãƒ¼ãƒ«çµæœã®ã¿ã‚’ä½¿ã†ã€‚
2) ä¸è¶³æƒ…å ±ãŒã‚ã‚‹å ´åˆã¯ã€æ¨æ¸¬ã›ãš1ã¤ãšã¤è³ªå•ã—ã¦åŸ‹ã‚ã‚‹ã€‚
3) é€é‡‘ã¯å¿…ãšå®Ÿè¡Œå‰ã«å¾©å”±ç¢ºèªã™ã‚‹ï¼ˆå®›å…ˆãƒ»é‡‘é¡ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã€‚
4) ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«ã€Œå®Ÿè¡Œã—ã¦ã€ã¨è¨€ã†ã¾ã§é€é‡‘ã‚’å®Ÿè¡Œã—ãªã„ã€‚
5) ã‚¨ãƒ©ãƒ¼æ™‚ã¯ã€åŸå› ã‚’å¹³æ˜“ã«èª¬æ˜ã—ã€æ¬¡ã®å…·ä½“çš„è¡Œå‹•ã‚’1ã¤ææ¡ˆã™ã‚‹ã€‚

ã€åˆ©ç”¨å¯èƒ½ãƒ„ãƒ¼ãƒ«ã¨ç”¨é€”ã€‘
- extract_voice_features: éŸ³å£°ã‹ã‚‰ç‰¹å¾´é‡æŠ½å‡º
- generate_zk_wallet: ç‰¹å¾´é‡ã‹ã‚‰ commitment/salt/ã‚¦ã‚©ãƒ¬ãƒƒãƒˆå°å‡º
- create_wallet: ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒ‡ãƒ—ãƒ­ã‚¤
- generate_zk_proof: é€é‡‘ç”¨ZKè¨¼æ˜ç”Ÿæˆ
- get_wallet_balance: ETH/USDCæ®‹é«˜å–å¾—
- get_wallet_address: commitment ã‹ã‚‰ã‚¢ãƒ‰ãƒ¬ã‚¹å–å¾—
- show_wallet_qrcode: å—å–QRç”Ÿæˆ
- transfer_tokens: ZKè¨¼æ˜ä»˜ãé€é‡‘å®Ÿè¡Œ

ã€æ¨™æº–ãƒ•ãƒ­ãƒ¼ã€‘
A. åˆå›ç™»éŒ²ï¼ˆã€Œã‚¦ã‚©ãƒ¬ãƒƒãƒˆä½œã‚ŠãŸã„ã€ï¼‰
- extract_voice_features â†’ generate_zk_wallet â†’ create_wallet
- å®Œäº†æ™‚ã« walletAddress ã‚’å¿…ãšä¼ãˆã‚‹
- salt / referenceFeatures / commitment ã¯ä¼šè©±å¤‰æ•°ã¨ã—ã¦ä¿æŒã™ã‚‹

B. æ®‹é«˜ç¢ºèª
- walletAddress ãŒãªã‘ã‚Œã°ç¢ºèª
- get_wallet_balance å®Ÿè¡Œ
- ã€ŒETHã€ã€ŒUSDCã€ã‚’èª­ã¿ä¸Šã’ã‚‹

C. å—å–ï¼ˆQRï¼‰
- walletAddress ãŒãªã‘ã‚Œã°ç¢ºèª
- show_wallet_qrcode å®Ÿè¡Œ
- ã€Œå—å–QRã‚’è¡¨ç¤ºã—ã¾ã—ãŸã€‚å¿…è¦ãªã‚‰ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚èª­ã¿ä¸Šã’ã¾ã™ã€ã¨æ¡ˆå†…

D. é€é‡‘
- äº‹å‰ã« from/to/amount/token ã‚’åé›†
- éŸ³å£°èªè¨¼: extract_voice_features â†’ generate_zk_proof(referenceFeatures, currentFeatures, salt)
- å®Ÿè¡Œå‰ç¢ºèª:
  ã€Œä»¥ä¸‹ã§é€é‡‘ã—ã¾ã™ã€‚å®›å…ˆ: ...ã€é‡‘é¡: ...ã€ãƒˆãƒ¼ã‚¯ãƒ³: ...ã€‚å®Ÿè¡Œã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿã€
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ˜ç¢ºãªè‚¯å®šå¾Œã« transfer_tokens ã‚’å®Ÿè¡Œ
- æˆåŠŸæ™‚ã¯ txHash ã‚’ä¼ãˆã€å¤±æ•—æ™‚ã¯ä¸è¶³æ®‹é«˜/è¨¼æ˜ä¸ä¸€è‡´ãªã©ã‚’æ˜ç¤º

ã€ä¼šè©±ã‚¹ã‚¿ã‚¤ãƒ«ã€‘
- 1ã‚¿ãƒ¼ãƒ³1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§é€²ã‚ã‚‹
- å°‚é–€ç”¨èªã¯çŸ­ãè£œè¶³ï¼ˆä¾‹:ã€ŒZKè¨¼æ˜=å£°ç´‹ã‚’å…¬é–‹ã›ãšæœ¬äººç¢ºèªã™ã‚‹ä»•çµ„ã¿ã€ï¼‰
- æ¯å›æœ€å¾Œã«æ¬¡ã®è¡Œå‹•ã‚’1ã¤ææ¡ˆã™ã‚‹
```

## å‹•ã‹ã—æ–¹

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

- ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

  ```bash
  pnpm install
  pip3 install -r pkgs/backend/requirements.txt
  ```

- ç’°å¢ƒå¤‰æ•°ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

  ```bash
  cp pkgs/backend/.env.example pkgs/backend/.env
  cp pkgs/contract/.env.example pkgs/contract/.env
  ```

`pkgs/contract/.env` ã«ã¯æœ€ä½é™ä»¥ä¸‹ã‚’è¨­å®š:
- `PRIVATE_KEY`
- `ALCHMEY_API_KEY`
- `BASESCAN_API_KEY`

### ZKã‚µãƒ¼ã‚­ãƒƒãƒˆ

- ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm --filter circuit compile
  ```

- Inputãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹

  ```bash
  pnpm --filter circuit generateInput
  ```

- ã‚¦ã‚£ãƒƒãƒˆãƒã‚¹ç”Ÿæˆ

  ```bash
  pnpm --filter circuit generateWitness
  ```

- Groth16ã«ã‚ˆã‚‹ä¸€é€£ã®å‹•ä½œãŒæ©Ÿèƒ½ã™ã‚‹ã‹ã‚’ãƒ†ã‚¹ãƒˆ

  ```bash
  pnpm --filter circuit executeGroth16
  ```

- ãƒ†ã‚¹ãƒˆ

  ```bash
  pnpm --filter circuit test
  ```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- ãƒ“ãƒ«ãƒ‰ï¼ˆZKæˆæœç‰©ã‚’ backend ã«åŒæœŸï¼‰

  ```bash
  pnpm --filter backend zk:copy
  ```

- ãƒ†ã‚¹ãƒˆ

  ```bash
  pnpm --filter backend test
  ```

- Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm --filter backend docker:build
  ```

- ãƒ­ãƒ¼ã‚«ãƒ«ã§Dockerã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•

  ```bash
  pnpm --filter backend docker:run
  ```

- Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤

  ```bash
  pnpm --filter backend cloudrun:deploy
  ```

- Cloud Runã‹ã‚‰å‰Šé™¤

  ```bash
  pnpm --filter backend cloudrun:cleanup
  ```

### ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ

- ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm --filter contract run compile
  ```

- ãƒ†ã‚¹ãƒˆ

  ```bash
  pnpm --filter contract run test
  ```

- ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆHardhat Ignitionï¼‰

  ```bash
  # Verifier + WalletFactory ã‚’ä¸€æ‹¬ãƒ‡ãƒ—ãƒ­ã‚¤
  pnpm --filter contract run deploy --network base-sepolia

  # VoiceCommitmentVerifier ã‚’å˜ä½“ãƒ‡ãƒ—ãƒ­ã‚¤
  pnpm --filter contract run deploy:commitmentVerifier --network base-sepolia

  # VoiceWalletï¼ˆProxy åˆæœŸåŒ–è¾¼ã¿ï¼‰ãƒ‡ãƒ—ãƒ­ã‚¤
  # VoiceWalletDeployment ã® Verifier ã‚’è‡ªå‹•å‚ç…§ã—ã€æœªãƒ‡ãƒ—ãƒ­ã‚¤ãªã‚‰åŒæ™‚ã«ãƒ‡ãƒ—ãƒ­ã‚¤
  pnpm --filter contract run deploy:walletProxy \
    --network base-sepolia \
    --parameters '{"VoiceWalletProxyDeployment": {"owner": "0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072", "commitment": "0x9f4d6e3b8c2a7d1e5f0b3a9c4e8d2f6a7b1c0d3e5f9a2b4c6d8e1f3a5b7c9d00"}}'

  # MockERC20 ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
  pnpm --filter contract run deploy:mockERC20 --network base-sepolia
  ```

- ã‚¿ã‚¹ã‚¯ï¼ˆHardhat Taskï¼‰ã‚’ä½¿ã†

  > `--verifier` ã¯çœç•¥å¯èƒ½ã§ã™ã€‚çœç•¥æ™‚ã¯ `ignition/deployments/chain-{chainId}/deployed_addresses.json` ã‹ã‚‰ `contractJsonHelper` ãŒè‡ªå‹•è§£æ±ºã—ã¾ã™ã€‚æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚Œã°ãã¡ã‚‰ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

  ```bash
  # ãƒã‚§ãƒ¼ãƒ³æƒ…å ± / æ®‹é«˜ç¢ºèª
  pnpm --filter contract run getChainInfo --network base-sepolia
  pnpm --filter contract run getBalance --network base-sepolia

  # Wallet æƒ…å ±å–å¾—ï¼ˆwalletã¯ deployed_addresses.json ã‹ã‚‰è‡ªå‹•è§£æ±ºï¼‰
  pnpm --filter contract exec hardhat walletInfo \
    --network base-sepolia

  # ETH / ERC20 é€é‡‘ï¼ˆwallet / token ã¯ deployed_addresses.json ã‹ã‚‰è‡ªå‹•è§£æ±ºï¼‰
  pnpm --filter contract exec hardhat walletEthTransfer \
    --to 0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072 \
    --amount 0.001 \
    --network base-sepolia

  pnpm --filter contract exec hardhat walletErc20Transfer \
    --to 0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072 \
    --amount 1 \
    --network base-sepolia

  # EntryPoint ã¸ã® deposit å…¥å‡ºé‡‘
  pnpm --filter contract exec hardhat walletAddDeposit \
    --amount 0.01 \
    --network base-sepolia

  pnpm --filter contract exec hardhat walletWithdrawDeposit \
    --to 0x51908F598A5e0d8F1A3bAbFa6DF76F9704daD072 \
    --amount 0.005 \
    --network base-sepolia

  # å¿…è¦ãªã‚‰æ‰‹å‹•ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¸Šæ›¸ãå¯èƒ½
  # --wallet 0x... / --token 0x...

  # è¨¼æ˜æ¤œè¨¼ï¼ˆproof ã¯ JSON æ–‡å­—åˆ—ï¼‰
  # --verifier çœç•¥æ™‚ã¯ deployed_addresses.json ã‹ã‚‰è‡ªå‹•å–å¾—
  pnpm --filter contract exec hardhat verifyProof \
    --proof '{"a":["1","2"],"b":[["3","4"],["5","6"]],"c":["7","8"],"input":["9"]}' \
    --network base-sepolia

  # ã¾ãŸã¯ snarkjs ã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥æŒ‡å®šï¼ˆæ¨å¥¨ï¼‰
  pnpm --filter contract exec hardhat verifyProof \
    --proof-file ../circuit/data/VoiceOwnership_proof.json \
    --public-file ../circuit/data/VoiceOwnership_public.json \
    --network base-sepolia

  # å¼•æ•°çœç•¥æ™‚ã¯æ—¢å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ä½¿ç”¨
  # ../circuit/data/VoiceOwnership_proof.json
  # ../circuit/data/VoiceOwnership_public.json
  pnpm --filter contract exec hardhat verifyProof --network base-sepolia

  # ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆE2Eæ¤œè¨¼ï¼ˆVerifier ã¯è‡ªå‹•è§£æ±ºã€è¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ MockVerifier ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
  pnpm --filter contract exec hardhat verifyTestnet --network base-sepolia
  ```

### MCPã‚µãƒ¼ãƒãƒ¼

- ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm mcpserver run build
  ```

- ãƒ†ã‚¹ãƒˆ

  ```bash
  pnpm mcpserver run test
  ```

- ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹•

  ```bash
  pnpm mcpserver run dev
  ```

  MCPã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Š

  ```bash
  npx @modelcontextprotocol/inspector
  ```

- Dockerã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm mcpserver run docker:build
  ```

- ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®Dockerã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•

  ```bash
  pnpm mcpserver run docker:run
  ```

  ã‚‚ã—ãƒ­ãƒ¼ã‚«ãƒ«ã§MCPã‚µãƒ¼ãƒãƒ¼ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ãŸã„ãªã‚‰è¿½åŠ ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ

  ```bash
  ngrok http 3000
  ```

- Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤

  ```bash
  pnpm mcpserver run cloudrun:deploy
  ```

- Cloud Runã‹ã‚‰å‰Šé™¤

  ```bash
  pnpm mcpserver run cloudrun:cleanup
  ```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- ãƒ“ãƒ«ãƒ‰

  ```bash
  pnpm frontend run build
  ```

- ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•

  ```bash
  pnpm frontend run dev
  ```
